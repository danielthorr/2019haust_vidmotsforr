<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

    <canvas id="c"></canvas>
    
    <script>

        //Following: https://webgl2fundamentals.org/webgl/lessons/webgl-fundamentals.html

        let canvas = document.getElementById("c");

        let gl = canvas.getContext("webgl2");
        if (!gl) {
            // no webl2 for you
        }
        
        let vertexShaderSource = 
            `#version 300 es
            
            // an attribute is an input (in) to a vertex shader.
            // It will receive data from a buffer
            in vec4 a_position;

            //all shaders have a main function
            void main() {
                // gl_Position is a special variable a vertex shader
                // is responsible for setting
                gl_Position = a_position;
            }`;

        let fragmentShaderSource = 
            `#version 300 es

            // fragment shaders don't have a default precision so we need to pick one.
            // mediump is a good default. It means "medium precision"
            precision mediump float;

            // we need to declare an output for the fragment shader
            out vec4 outColor;

            void main() {
                //Jus set the output to a constant redish-purple
                outColor = vec4(1, 0, 0.5, 1);
            }`;

        function createShader(gl, type, source) {
            let shader = gl.createShader(type);
            gl.shaderSource(shader, source);
            gl.compileShader(shader);
            let success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);
            
            if (success) { return shader; }

            console.log(gl.getShaderInfoLog(shader));
            gl.deleteShader(shader);
        }
        function createProgram(gl, vertexShader, fragmentShader) {
            let program = gl.createProgram();
            gl.attachShader(program, vertexShader);
            gl.attachShader(program, fragmentShader);
            gl.linkProgram(program);
            let success = gl.getProgramParameter(program, gl.LINK_STATUS);

            if (success) { return program; }

            console.log(gl.getProgramInfoLog(program));
            gl.deleteProgram(program);
        }

        let vertexShader = createShader(gl, gl.VERTEX_SHADER, vertexShaderSource);
        let fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);

        let program = createProgram(gl, vertexShader, fragmentShader);

        let positionAttributeLocation = gl.getAttribLocation(program, "a_position");
    </script>
</body>
</html>